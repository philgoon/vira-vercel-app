/**
 * STM Design System - Brand Integration
 * Morse code capsule loaders, surface patterns, watermarks
 */

/* ==========================================
   MORSE CODE CAPSULE LOADER
   Branded loading animation replacing generic spinners
   ========================================== */

/*
 * Morse code pattern: S = ··· (3 dots), T = — (1 dash), M = —— (2 dashes)
 * Capsules animate in dot-dash rhythm using brand colors
 */

.stm-loader {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

/* Individual capsule shape */
.stm-loader-capsule {
  border-radius: var(--stm-radius-full);
  animation: stm-morse-pulse 1.8s ease-in-out infinite;
}

/* Dot = short capsule (green) */
.stm-loader-dot {
  width: 8px;
  height: 8px;
  background: var(--stm-throw);
}

/* Dash = long capsule (blue) */
.stm-loader-dash {
  width: 20px;
  height: 8px;
  background: var(--stm-single);
}

/* Staggered animation delays: S(···) T(—) M(——) */
.stm-loader-capsule:nth-child(1) { animation-delay: 0s; }
.stm-loader-capsule:nth-child(2) { animation-delay: 0.15s; }
.stm-loader-capsule:nth-child(3) { animation-delay: 0.3s; }
.stm-loader-capsule:nth-child(4) { animation-delay: 0.55s; }
.stm-loader-capsule:nth-child(5) { animation-delay: 0.8s; }
.stm-loader-capsule:nth-child(6) { animation-delay: 0.95s; }

@keyframes stm-morse-pulse {
  0%, 100% {
    opacity: 0.2;
    transform: scale(0.85);
  }
  50% {
    opacity: 1;
    transform: scale(1);
  }
}

/* Loader Sizes */
.stm-loader-sm .stm-loader-dot {
  width: 6px;
  height: 6px;
}
.stm-loader-sm .stm-loader-dash {
  width: 14px;
  height: 6px;
}
.stm-loader-sm {
  gap: 3px;
}

.stm-loader-lg .stm-loader-dot {
  width: 12px;
  height: 12px;
}
.stm-loader-lg .stm-loader-dash {
  width: 30px;
  height: 12px;
}
.stm-loader-lg {
  gap: 6px;
}

.stm-loader-xl .stm-loader-dot {
  width: 16px;
  height: 16px;
}
.stm-loader-xl .stm-loader-dash {
  width: 40px;
  height: 16px;
}
.stm-loader-xl {
  gap: 8px;
}

/* Vertical stacked variant */
.stm-loader-vertical {
  flex-direction: column;
  align-items: flex-start;
}

/* Loader with text */
.stm-loader-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--stm-space-3);
}

.stm-loader-text {
  color: var(--stm-muted-foreground);
  font-family: var(--stm-font-body);
  font-size: var(--stm-text-sm);
  font-weight: var(--stm-font-medium);
}

/* Color Variants */
.stm-loader-white .stm-loader-dot,
.stm-loader-white .stm-loader-dash {
  background: white;
}

.stm-loader-muted .stm-loader-dot {
  background: var(--stm-gray-400);
}
.stm-loader-muted .stm-loader-dash {
  background: var(--stm-gray-500);
}

/* Full-page loader overlay */
.stm-loader-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(4px);
  z-index: var(--stm-z-modal);
}

/* Inline loader (replaces spinner in buttons, inputs, etc.) */
.stm-loader-inline {
  display: inline-flex;
  vertical-align: middle;
  gap: 2px;
}

.stm-loader-inline .stm-loader-dot {
  width: 4px;
  height: 4px;
}
.stm-loader-inline .stm-loader-dash {
  width: 10px;
  height: 4px;
}

/* ==========================================
   MORSE SURFACE PATTERN
   Repeating capsule background texture
   ========================================== */

/*
 * Inline SVG of morse code capsule pattern.
 * Apply to any element for subtle branded texture.
 * Use with ::before or ::after pseudo-element for layering.
 */

.stm-surface-morse {
  position: relative;
}

.stm-surface-morse::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='80' viewBox='0 0 120 80'%3E%3Crect x='8' y='12' width='8' height='8' rx='4' fill='%236b8e71'/%3E%3Crect x='20' y='12' width='8' height='8' rx='4' fill='%236b8e71'/%3E%3Crect x='32' y='12' width='8' height='8' rx='4' fill='%236b8e71'/%3E%3Crect x='48' y='12' width='22' height='8' rx='4' fill='%231a5276'/%3E%3Crect x='78' y='12' width='22' height='8' rx='4' fill='%231a5276'/%3E%3Crect x='108' y='12' width='22' height='8' rx='4' fill='%231a5276'/%3E%3Crect x='8' y='52' width='8' height='8' rx='4' fill='%236b8e71'/%3E%3Crect x='20' y='52' width='8' height='8' rx='4' fill='%236b8e71'/%3E%3Crect x='32' y='52' width='8' height='8' rx='4' fill='%236b8e71'/%3E%3Crect x='48' y='52' width='22' height='8' rx='4' fill='%231a5276'/%3E%3Crect x='78' y='52' width='22' height='8' rx='4' fill='%231a5276'/%3E%3Crect x='108' y='52' width='22' height='8' rx='4' fill='%231a5276'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 120px 80px;
  z-index: 0;
}

.stm-surface-morse > * {
  position: relative;
  z-index: 1;
}

/* Stronger surface for hero sections, large areas */
.stm-surface-morse-strong::before {
  opacity: 0.06;
}

/* Subtle surface for cards, small areas */
.stm-surface-morse-subtle::before {
  opacity: 0.015;
}

/* Animated surface (capsules fade in/out) */
.stm-surface-morse-animated::before {
  animation: stm-surface-breathe 8s ease-in-out infinite;
}

@keyframes stm-surface-breathe {
  0%, 100% { opacity: 0.02; }
  50% { opacity: 0.05; }
}

/* Light variant (for dark backgrounds like sidebar, footer, headers)
 * 6 layers of the white morse SVG at different sizes, scattered with no-repeat
 * per layer but stacked to create an organic, randomized feel across the element. */
.stm-surface-morse-light::before {
  background-image:
    url("/assets/icons/stm-morse-code-white.svg"),
    url("/assets/icons/stm-morse-code-white.svg"),
    url("/assets/icons/stm-morse-code-white.svg"),
    url("/assets/icons/stm-morse-code-white.svg"),
    url("/assets/icons/stm-morse-code-white.svg"),
    url("/assets/icons/stm-morse-code-white.svg");
  background-repeat: no-repeat;
  background-size:
    54px 90px,
    36px 60px,
    90px 150px,
    45px 75px,
    27px 45px,
    72px 120px;
  background-position:
    5% 8%,
    62% 22%,
    30% 55%,
    80% 65%,
    12% 85%,
    68% 90%;
  opacity: 0.15;
}


/* ==========================================
   STM WATERMARK
   Ghost icon for cards, auth pages, backgrounds
   ========================================== */

/*
 * STM WATERMARK
 * Vertical morse code capsule pattern as subtle watermark.
 * Uses the recognizable S-T-M dot/dash arrangement from the brand mark.
 */

.stm-watermark {
  position: relative;
  overflow: hidden;
}

.stm-watermark::after {
  content: '';
  position: absolute;
  bottom: -10%;
  right: -5%;
  width: 30%;
  height: 70%;
  pointer-events: none;
  opacity: 0.035;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 451.06 746.14'%3E%3Crect x='200.98' y='114.75' width='364.83' height='135.34' rx='67.67' ry='67.67' fill='%231a5276' transform='translate(200.98 565.81) rotate(-90)'/%3E%3Crect x='200.98' y='496.05' width='364.83' height='135.34' rx='67.67' ry='67.67' fill='%231a5276' transform='translate(-180.33 947.11) rotate(-90)'/%3E%3Crect x='-60.18' y='305.43' width='571.42' height='135.34' rx='67.67' ry='67.67' fill='%231a5276' transform='translate(-147.57 598.63) rotate(-90)'/%3E%3Crect x='-13.02' y='305.6' width='161.37' height='135.34' rx='67.67' ry='67.67' fill='%231a5276' transform='translate(-305.6 440.93) rotate(-90)'/%3E%3Crect x='-13.02' y='128.27' width='161.37' height='135.34' rx='67.67' ry='67.67' fill='%231a5276' transform='translate(-128.27 263.6) rotate(-90)'/%3E%3Crect x='-13.02' y='482.54' width='161.37' height='135.34' rx='67.67' ry='67.67' fill='%231a5276' transform='translate(-482.54 617.88) rotate(-90)'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  z-index: 0;
}

.stm-watermark > * {
  position: relative;
  z-index: 1;
}

/* Larger watermark for auth pages */
.stm-watermark-auth::after {
  bottom: -15%;
  right: -10%;
  width: 45%;
  height: 90%;
  opacity: 0.025;
  transform: rotate(-12deg);
}

/* Small watermark for cards */
.stm-watermark-card::after {
  bottom: -5%;
  right: -3%;
  width: 22%;
  height: 50%;
  opacity: 0.04;
}

/* Centered watermark (for empty states, modals) */
.stm-watermark-center::after {
  top: 50%;
  left: 50%;
  right: auto;
  bottom: auto;
  transform: translate(-50%, -50%);
  width: 35%;
  height: 60%;
  opacity: 0.03;
}

/* Two-tone variant preserving brand green + blue colors */
.stm-watermark-color::after {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 451.06 746.14'%3E%3Crect x='200.98' y='114.75' width='364.83' height='135.34' rx='67.67' ry='67.67' fill='%236b8e71' transform='translate(200.98 565.81) rotate(-90)'/%3E%3Crect x='200.98' y='496.05' width='364.83' height='135.34' rx='67.67' ry='67.67' fill='%231a5276' transform='translate(-180.33 947.11) rotate(-90)'/%3E%3Crect x='-60.18' y='305.43' width='571.42' height='135.34' rx='67.67' ry='67.67' fill='%231a5276' transform='translate(-147.57 598.63) rotate(-90)'/%3E%3Crect x='-13.02' y='305.6' width='161.37' height='135.34' rx='67.67' ry='67.67' fill='%231a5276' transform='translate(-305.6 440.93) rotate(-90)'/%3E%3Crect x='-13.02' y='128.27' width='161.37' height='135.34' rx='67.67' ry='67.67' fill='%236b8e71' transform='translate(-128.27 263.6) rotate(-90)'/%3E%3Crect x='-13.02' y='482.54' width='161.37' height='135.34' rx='67.67' ry='67.67' fill='%236b8e71' transform='translate(-482.54 617.88) rotate(-90)'/%3E%3C/svg%3E");
  opacity: 0.05;
}


/* ==========================================
   MORSE DIVIDER
   Capsule-shaped section separator
   ========================================== */

.stm-divider-morse {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: var(--stm-space-4) 0;
  border: none;
  background: none;
}

.stm-divider-morse::before,
.stm-divider-morse::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--stm-gray-200);
}

/* Inline capsules as the center element */
.stm-divider-morse-capsules {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 0 var(--stm-space-3);
}

.stm-divider-morse-capsules .stm-morse-dot {
  width: 6px;
  height: 6px;
  border-radius: var(--stm-radius-full);
  background: var(--stm-throw);
  opacity: 0.3;
}

.stm-divider-morse-capsules .stm-morse-dash {
  width: 16px;
  height: 6px;
  border-radius: var(--stm-radius-full);
  background: var(--stm-single);
  opacity: 0.3;
}

/* Compact divider (no side lines, just capsules) */
.stm-divider-morse-compact {
  justify-content: center;
}

.stm-divider-morse-compact::before,
.stm-divider-morse-compact::after {
  display: none;
}

/* Divider size variants */
.stm-divider-morse-sm .stm-morse-dot {
  width: 4px;
  height: 4px;
}

.stm-divider-morse-sm .stm-morse-dash {
  width: 12px;
  height: 4px;
}

.stm-divider-morse-lg .stm-morse-dot {
  width: 8px;
  height: 8px;
}

.stm-divider-morse-lg .stm-morse-dash {
  width: 22px;
  height: 8px;
}

/* Light divider for dark backgrounds */
.stm-divider-morse-light::before,
.stm-divider-morse-light::after {
  background: rgba(255, 255, 255, 0.15);
}

.stm-divider-morse-light .stm-morse-dot {
  background: rgba(255, 255, 255, 0.4);
}

.stm-divider-morse-light .stm-morse-dash {
  background: rgba(255, 255, 255, 0.4);
}


/* ==========================================
   CAPSULE PROGRESS BAR
   Segmented progress with capsule shapes
   ========================================== */

.stm-progress-capsule {
  display: flex;
  align-items: center;
  gap: 4px;
  width: 100%;
}

.stm-progress-capsule-segment {
  flex: 1;
  height: 8px;
  border-radius: var(--stm-radius-full);
  background: var(--stm-gray-200);
  transition: var(--stm-transition-normal);
}

.stm-progress-capsule-segment-filled {
  background: var(--stm-primary);
}

/* Color variants for filled segments */
.stm-progress-capsule-success .stm-progress-capsule-segment-filled {
  background: var(--stm-success);
}

.stm-progress-capsule-warning .stm-progress-capsule-segment-filled {
  background: var(--stm-warning);
}

.stm-progress-capsule-error .stm-progress-capsule-segment-filled {
  background: var(--stm-error);
}

/* Brand color: alternating green/blue */
.stm-progress-capsule-brand .stm-progress-capsule-segment-filled:nth-child(3n+1) {
  background: var(--stm-single);
}

.stm-progress-capsule-brand .stm-progress-capsule-segment-filled:nth-child(3n+2) {
  background: var(--stm-throw);
}

.stm-progress-capsule-brand .stm-progress-capsule-segment-filled:nth-child(3n) {
  background: var(--stm-single);
}

/* Sizes */
.stm-progress-capsule-sm .stm-progress-capsule-segment {
  height: 4px;
}

.stm-progress-capsule-lg .stm-progress-capsule-segment {
  height: 12px;
}

/* With label */
.stm-progress-capsule-labeled {
  display: flex;
  flex-direction: column;
  gap: var(--stm-space-2);
}

.stm-progress-capsule-label {
  display: flex;
  justify-content: space-between;
  font-size: var(--stm-text-sm);
  color: var(--stm-muted-foreground);
}


/* ==========================================
   CAPSULE STEPPER INDICATORS
   Replace circle step dots with capsule shapes
   ========================================== */

/* Override the default circle step indicator with capsule shape */
.stm-stepper-capsule .stm-step-indicator {
  width: 2.5rem;
  height: 1.5rem;
  border-radius: var(--stm-radius-full);
  border: 2px solid var(--stm-gray-300);
  background: white;
}

.stm-stepper-capsule .stm-step-active .stm-step-indicator {
  border-color: var(--stm-primary);
  background: var(--stm-primary);
}

.stm-stepper-capsule .stm-step-completed .stm-step-indicator {
  border-color: var(--stm-success);
  background: var(--stm-success);
}

/* Upcoming steps: outlined capsule */
.stm-stepper-capsule .stm-step:not(.stm-step-active):not(.stm-step-completed) .stm-step-indicator {
  background: transparent;
}

/* Connector uses capsule-style dots */
.stm-stepper-capsule .stm-step-connector {
  background: none;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 3px;
}

.stm-stepper-capsule.stm-stepper-horizontal .stm-step-connector {
  height: auto;
  top: calc(0.75rem - 1px);
}

.stm-stepper-capsule .stm-step-connector::before,
.stm-stepper-capsule .stm-step-connector::after {
  content: '';
  width: 4px;
  height: 4px;
  border-radius: var(--stm-radius-full);
  background: var(--stm-gray-300);
}

.stm-stepper-capsule .stm-step-completed .stm-step-connector::before,
.stm-stepper-capsule .stm-step-completed .stm-step-connector::after {
  background: var(--stm-success);
}

/* Brand color stepper: green for S dots, blue for T-M dashes */
.stm-stepper-capsule-brand .stm-step-active .stm-step-indicator {
  border-color: var(--stm-single);
  background: var(--stm-single);
}

.stm-stepper-capsule-brand .stm-step-completed .stm-step-indicator {
  border-color: var(--stm-throw);
  background: var(--stm-throw);
}


/* ==========================================
   STM ICON PLACEMENTS
   Sidebar collapsed, favicon, error pages
   ========================================== */

/* Sidebar: show STM icon when collapsed, full logo when expanded */
.stm-sidebar-logo-icon {
  width: 32px;
  height: 32px;
  flex-shrink: 0;
}

.stm-sidebar-logo-full {
  height: 28px;
  width: auto;
  transition: opacity var(--stm-duration-fast) var(--stm-ease-out),
    width var(--stm-duration-fast) var(--stm-ease-out);
}

.stm-sidebar-collapsed .stm-sidebar-logo-full {
  opacity: 0;
  width: 0;
  overflow: hidden;
}

/* Error page brand layout */
.stm-error-page {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: var(--stm-space-8);
  text-align: center;
}

.stm-error-icon {
  width: 80px;
  height: 80px;
  margin-bottom: var(--stm-space-6);
  opacity: 0.6;
}

.stm-error-icon-bordered {
  padding: var(--stm-space-4);
  border: 2px solid var(--stm-gray-200);
  border-radius: var(--stm-radius-xl);
}

/* Open-corner border metaphor */
.stm-error-icon-corners {
  position: relative;
  padding: var(--stm-space-6);
}

.stm-error-icon-corners::before,
.stm-error-icon-corners::after {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  border-color: var(--stm-single);
  border-style: solid;
}

.stm-error-icon-corners::before {
  top: 0;
  left: 0;
  border-width: 2px 0 0 2px;
  border-radius: var(--stm-radius-sm) 0 0 0;
}

.stm-error-icon-corners::after {
  bottom: 0;
  right: 0;
  border-width: 0 2px 2px 0;
  border-radius: 0 0 var(--stm-radius-sm) 0;
}

.stm-error-code {
  font-family: var(--stm-font-headline);
  font-size: var(--stm-text-5xl);
  font-weight: var(--stm-font-black);
  color: var(--stm-primary);
  margin: 0 0 var(--stm-space-2);
}

.stm-error-title {
  font-size: var(--stm-text-xl);
  font-weight: var(--stm-font-semibold);
  color: var(--stm-foreground);
  margin: 0 0 var(--stm-space-3);
}

.stm-error-description {
  font-size: var(--stm-text-base);
  color: var(--stm-muted-foreground);
  margin: 0 0 var(--stm-space-8);
  max-width: 480px;
  line-height: var(--stm-leading-relaxed);
}


/* ==========================================
   FULL LOGO IN FOOTER / PRINT
   ========================================== */

.stm-footer-brand {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--stm-space-4);
  padding: var(--stm-space-8) 0;
}

.stm-footer-logo {
  height: 100px;
  width: auto;
  opacity: 0.8;
}

.stm-footer-tagline {
  font-size: var(--stm-text-sm);
  color: rgba(255, 255, 255, 0.6);
}

/* Print: auto-include logo in header */
@media print {
  .stm-print-header {
    display: flex !important;
    align-items: center;
    justify-content: space-between;
    padding-bottom: var(--stm-space-4);
    margin-bottom: var(--stm-space-6);
    border-bottom: 1px solid var(--stm-gray-300);
  }

  .stm-print-logo {
    height: 32px;
    width: auto;
  }

  .stm-print-date {
    font-size: var(--stm-text-xs);
    color: var(--stm-gray-500);
  }
}


/* ==========================================
   CAPSULE BADGE DOTS
   Replace circle dots with capsule shape
   ========================================== */

/* Override default circle badge dot with capsule */
.stm-badge-capsule::before {
  content: '';
  width: 0.75rem;
  height: 0.375rem;
  border-radius: var(--stm-radius-full);
  background: currentColor;
}

/* Remove the default circle dot when capsule is active */
.stm-badge-dot.stm-badge-capsule::before {
  width: 0.75rem;
  height: 0.375rem;
}

/* Pulsing capsule dot for active/live indicators */
.stm-badge-capsule-pulse::before {
  animation: stm-capsule-pulse 2s ease-in-out infinite;
}

@keyframes stm-capsule-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}


/* ==========================================
   CAPSULE EMPTY STATE
   Morse code mark as empty state illustration
   ========================================== */

.stm-empty-state-morse {
  position: relative;
}

.stm-empty-state-morse .stm-empty-state-icon {
  width: 96px;
  height: 96px;
  background-image: url("/assets/icons/stm-morse-code-color.svg");
  background-repeat: no-repeat;
  background-size: contain;
  background-position: center;
  opacity: 0.12;
}

/* Larger empty state for full-page contexts */
.stm-empty-state-morse-lg .stm-empty-state-icon {
  width: 140px;
  height: 140px;
  opacity: 0.08;
}

/* With subtle surface pattern behind */
.stm-empty-state-morse-surface {
  position: relative;
}

.stm-empty-state-morse-surface::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("/assets/icons/stm-morse-code-color.svg");
  background-repeat: no-repeat;
  background-size: 200px auto;
  background-position: center;
  opacity: 0.04;
  pointer-events: none;
}


/* ==========================================
   DOT GRID SURFACE
   Subtle dot grid texture for backgrounds
   ========================================== */

.stm-surface-dots {
  position: relative;
}

.stm-surface-dots::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: var(--stm-opacity-decorative);
  background-image: radial-gradient(circle, var(--stm-gray-400) 1px, transparent 1px);
  background-size: 20px 20px;
  z-index: 0;
}

.stm-surface-dots > * {
  position: relative;
  z-index: 1;
}

/* Tighter grid */
.stm-surface-dots-sm::before {
  background-size: 12px 12px;
}

/* Looser grid */
.stm-surface-dots-lg::before {
  background-size: 32px 32px;
}

/* Stronger dots */
.stm-surface-dots-strong::before {
  opacity: var(--stm-opacity-50);
}

/* Subtle dots */
.stm-surface-dots-subtle::before {
  opacity: var(--stm-opacity-15);
}

/* Light dots for dark backgrounds */
.stm-surface-dots-light::before {
  background-image: radial-gradient(circle, rgba(255, 255, 255, 0.5) 1px, transparent 1px);
  opacity: var(--stm-opacity-20);
}

/* Brand-colored dots */
.stm-surface-dots-brand::before {
  background-image:
    radial-gradient(circle, var(--stm-single) 1px, transparent 1px),
    radial-gradient(circle, var(--stm-throw) 1px, transparent 1px);
  background-size: 24px 24px, 24px 24px;
  background-position: 0 0, 12px 12px;
  opacity: var(--stm-opacity-15);
}


/* ==========================================
   BRAND MOTION
   Morse-code-inspired animation patterns
   ========================================== */

/* Morse pulse: dot-dot-dot dash-dash rhythm */
@keyframes stm-morse-signal {
  0%, 5% { opacity: 1; }
  6%, 11% { opacity: var(--stm-opacity-20); }
  12%, 17% { opacity: 1; }
  18%, 23% { opacity: var(--stm-opacity-20); }
  24%, 29% { opacity: 1; }
  30%, 40% { opacity: var(--stm-opacity-20); }
  41%, 55% { opacity: 1; }
  56%, 65% { opacity: var(--stm-opacity-20); }
  66%, 80% { opacity: 1; }
  81%, 100% { opacity: var(--stm-opacity-20); }
}

/* Capsule slide-in from left, morse timing */
@keyframes stm-capsule-enter {
  0% { transform: translateX(-100%); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}

/* Staggered fade for lists/grids */
@keyframes stm-stagger-in {
  0% { opacity: 0; transform: translateY(8px); }
  100% { opacity: 1; transform: translateY(0); }
}

/* Apply morse signal to any element */
.stm-animate-morse {
  animation: stm-morse-signal 4s var(--stm-ease-in-out) infinite;
}

/* Capsule entrance */
.stm-animate-capsule-enter {
  animation: stm-capsule-enter var(--stm-duration-normal) var(--stm-ease-out) forwards;
}

/* Staggered children animation */
.stm-animate-stagger > * {
  opacity: 0;
  animation: stm-stagger-in var(--stm-duration-normal) var(--stm-ease-out) forwards;
}

.stm-animate-stagger > *:nth-child(1) { animation-delay: 0ms; }
.stm-animate-stagger > *:nth-child(2) { animation-delay: 80ms; }
.stm-animate-stagger > *:nth-child(3) { animation-delay: 160ms; }
.stm-animate-stagger > *:nth-child(4) { animation-delay: 240ms; }
.stm-animate-stagger > *:nth-child(5) { animation-delay: 320ms; }
.stm-animate-stagger > *:nth-child(6) { animation-delay: 400ms; }
.stm-animate-stagger > *:nth-child(7) { animation-delay: 480ms; }
.stm-animate-stagger > *:nth-child(8) { animation-delay: 560ms; }

/* Morse-rhythm loading bar */
@keyframes stm-morse-bar {
  0% { width: 0%; }
  10% { width: 8%; }
  12% { width: 8%; }
  15% { width: 16%; }
  17% { width: 16%; }
  20% { width: 24%; }
  30% { width: 24%; }
  45% { width: 50%; }
  55% { width: 50%; }
  70% { width: 76%; }
  80% { width: 76%; }
  95% { width: 100%; }
  100% { width: 100%; }
}

.stm-progress-morse {
  height: 4px;
  background: var(--stm-gray-200);
  border-radius: var(--stm-radius-full);
  overflow: hidden;
}

.stm-progress-morse::after {
  content: '';
  display: block;
  height: 100%;
  background: var(--stm-gradient-blue);
  border-radius: var(--stm-radius-full);
  animation: stm-morse-bar 3s var(--stm-ease-in-out) infinite;
}

/* Reduced motion: disable animations */
@media (prefers-reduced-motion: reduce) {
  .stm-animate-morse,
  .stm-animate-capsule-enter,
  .stm-animate-stagger > *,
  .stm-progress-morse::after,
  .stm-loader .stm-loader-dot,
  .stm-loader .stm-loader-dash {
    animation: none;
    opacity: 1;
    transform: none;
  }
}
